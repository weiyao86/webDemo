<!DOCTYPE html>
<html>
<head>
<script>
    const isAndroid = navigator.userAgent.indexOf('Android') > -1 || navigator.userAgent.indexOf('Adr') > -1;
    const isIos = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
if (isAndroid) {
    window.addEventListener('resize', () => {
        if (document.activeElement.tagName == 'INPUT') {
            window.setTimeout(() => {
                document.activeElement.scrollIntoViewIfNeeded()
            }, 0)
        }
    })
} else if (isIos) {
    window.addEventListener('focusin', () => {
        document.body.scrollTop = document.body.scrollHeight;
        })
    window.addEventListener('focusout', () => {
        window.scrollTo(0,0);
    })
}

    /**修复高度坍塌
     * 当页面同时出现以下三个条件时，键盘占位会把页面高度压缩一部分。当输入完成键盘占位消失后，页面高度有可能回不到原来高度，产生坍塌导致Webview底色露脸，简单概括就是输入框失焦后页面未回弹。

            页面高度过小
            输入框在页面底部或视窗中下方
            输入框聚焦输入文本
     * 
     * */
     window.onload=()=>{
    // const inputArr = document.getElementsByTagName("input");

    // console.log(inputArr)
    // let scrollTop = 0;
    // [...inputArr].forEach(input=>{

    //     input.addEventListener("focus", () => {
    //         scrollTop = document.scrollingElement.scrollTop;
    //          document.activeElement.value='in'+scrollTop+'***'+Math.floor(Math.random())
    //     });
    //     input.addEventListener("blur", () => {
    //         console.log('blur')
    //         // document.scrollingElement.scrollTo(0, scrollTop);
    //          document.activeElement.value='out'+scrollTop+'***'+Math.floor(Math.random())
    //     });

    // })

    window.addEventListener('focusin',(e)=>{
        if(e.target.tagName=='INPUT'){
            scrollTop = document.scrollingElement.scrollTop;
        }
      
    })
    window.addEventListener('focusout',(e)=>{
        if(e.target.tagName=='INPUT'){
             document.scrollingElement.scrollTo(0, scrollTop);
        }
      
    })



/**
 * iOS上拉边界下拉出现白色空白
 * */
    // document.body.addEventListener('touchmove', (e) => {
    //       if (e._isScroller) return;

    //       e.preventDefault()
    //     }, {
    //       passive: false
    // })
    //  document.getElementById("wrap").addEventListener('touchmove', (e) => {
    //       e._isScroller = true
    //     })


    // window.addEventListener('focusin', () => {
    //     if (document.activeElement.tagName == 'INPUT') {
    //         scrollTop = document.scrollingElement.scrollTop;
    //         document.activeElement.value='in'+scrollTop+'***'+Math.floor(Math.random())
    //         console.log('focusin',scrollTop)
    //     }
    // })
    // window.addEventListener('focusout', () => {
    //         console.log('t',document.activeElement.tagName)
    //     if (document.activeElement.tagName == 'INPUT') {
    //         // document.scrollingElement.scrollTo(0, scrollTop);
    //          document.activeElement.value='out'+scrollTop+'***'+Math.floor(Math.random())
    //         console.log('focusout',scrollTop)
    //     }
    // })
}
</script>
</head>
<body>
    <div id="wrap">
<input type="text" style="padding-top:1000px;">    针对移动端安卓、ios手机键盘遮挡输入框方法处理
<input type="text">
</div>
</body>
</html>