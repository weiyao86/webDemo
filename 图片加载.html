<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <!--    <script src="Scripts/jquery-1.9.0.js"> </script>-->
    <script src="Scripts/jquery-1.4.1.js"></script>
    <style type="text/css">
        .tr {
            background-color: black;
            border: 1px solid red;
        }
    </style>
    <script type="text/javascript">
        var im = new Image();


        $(function () {

            $("#btnID").bind("click", function () {

                $("#tbTest").slideToggle(function () {
                    if ($(this).is(":hidden"))
                        alert($(this).height() + '***' + $(document).height() + '***' + document.body.clientHeight);
                    else
                        alert($(this).height() + '***' + $(document).height() + '***' + document.body.clientHeight);
                    var url = "Res/aa.jpg";


                    var img = "<img  src='Res/aa1.jpg' onload='at();' />";
                    loadImage('Res/aa1.jpg', function () {
                        alert(this.complete);
                    });
                });
            });
        });

        function loadImage(url, callback) {
            var img = new Image(); //创建一个Image对象，实现图片的预下载
            img.src = url;

            if (img.complete) { // 如果图片已经存在于浏览器缓存，直接调用回调函数
                callback.call(img);
                return; // 直接返回，不用再处理onload事件
            }
            img.onload = function () { //图片下载完毕时异步调用callback函数。
                callback.call(img);//将回调函数的this替换为Image对象
            };
        };



        /**imagesLoaded  图片加载完成后
        **!typeof Function
        **
        **
        **/
        // images loaded
        $.fn.imagesLoaded = function (callback) {

            var elems = this.filter('img'),
                len = elems.length,
                blank = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";  //??没看懂
            elems.bind('load.imgloaded', function () {
                if (--len <= 0 && this.src !== blank) {
                    elems.unbind('load.imgloaded');
                    callback.call(elems, this);
                }
            }).each(function () {
                // cached images don't fire load sometimes, so we reset src.
                if (this.complete || this.complete === undefined) {
                    var src = this.src;
                    // webkit hack from 
                    // data uri bypasses webkit log warning (thx doug jones)
                    this.src = blank;
                    this.src = src;
                }
            });

            return this;
        }
    </script>
    <style type="text/css">
        html, body {
            height: auto;
        }
    </style>
</head>
<body>


    <a id="A1" name="key_a">dddd</a>
    <div id="myDiv"
        style="position: absolute; left: 150px; top: 100px; width: 400px; height: 200px; background-color: blue;">
    </div>
    <button onclick="alert(myDiv.clientLeft);">clientLeft</button>&nbsp;
    <table id="tbTest" style="height: 1500px; width: 800px;">
        <tr>
            <td>asdfsasasf</td>
            <td>asdfsasasf</td>
        </tr>
    </table>
    <div id="testID"></div>
    <img id="imgID" data-field="img" src="Res/aa.jpg" width="200" height="300" />
    <input id="btnID" type="button" value="btnTest" />
    <a  href="#key_a">fffff</a>
</body>
</html>
